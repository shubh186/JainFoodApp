<!DOCTYPE html>
<html>
<head>
    <!--
        Customize the content security policy in the meta tag below as needed. Add 'unsafe-inline' to default-src to enable inline JavaScript.
        For details, see http://go.microsoft.com/fwlink/?LinkID=617521
    -->
    <!--<meta http-equiv="Content-Security-Policy" content="default-src 'self' data: gap: https://ssl.gstatic.com 'unsafe-eval'; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com/; script-src 'self' 'unsafe-inline' https://maps.googleapis.com; media-src *; img-src *">-->

    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    <meta name="format-detection" content="telephone=no">
    <meta name="msapplication-tap-highlight" content="no">
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width">
    <link rel="stylesheet" type="text/css" href="css/GoogleMap.css">
    <link rel="stylesheet" type="text/css" href="css/onsenui.css">
    <link rel="stylesheet" type="text/css" href="css/onsen-css-components.min.css">
    <link rel="stylesheet" type="text/css" href="css/index.css">
    <script type="text/javascript" src="scripts/onsenui.min.js"></script>
    <title>Jain Food App</title>
</head>
<body>
    <ons-page>
        <ons-toolbar>
            <div class="center">Jain Food App</div>
        </ons-toolbar>

        <ons-tabbar swipeable position="bottom">
            <ons-tab page="map.html" label="Map" icon="ion-ios-location, material:md-home" active>
            </ons-tab>
            <ons-tab onclick="showPopover(this)" label="By Cuisine" icon="ion-fork" active-icon="ion-fork">
            </ons-tab>
            <ons-tab page="listView.html" label="List View" icon="ion-ios-list-outline" active-icon="ion-ios-list-outline">
            </ons-tab>
            <ons-tab page="aboutUs.html" label="About Us" icon="ion-information-circled" active-icon="ion-information-circled">
            </ons-tab>
        </ons-tabbar>
    </ons-page>
    <ons-popover direction="up" id="popover">
        <div style="padding: 10px; text-align: center;">
            <p>
                This is a popover
            </p>
        </div>
    </ons-popover>
    <template id="map.html">
        <ons-page id="Map">
            <div style="display: none">
                <input id="pac-input"
                       class="controls"
                       type="text"
                       placeholder="Enter a location">
            </div>
            <div id="map"></div>
            <div id="infowindow-content">
                <span id="place-name" class="title"></span><br /><br />
                <span id="place-address"></span>
                <div class="add-button-container">
                    <a class="add-button" onclick="navigateTo('addRestaurant.html');">Add this place</a>
                </div>
            </div>
        </ons-page>
    </template>
    <script>
        var showPopover = function (target) {
            var popup = document.getElementById('popover')
            if (popup.style.display == 'block') {
                popup.hide();
            } else {
                popup.show(target);
            }
        };
    </script>
    <script type="text/javascript" src="scripts/jquery.min.js"></script>
    <script type="text/javascript" src="scripts/jquery.csv.min.js"></script>
    <script>

        let csvObjects;
        $.ajax({
            type: "GET",
            url: "https://docs.google.com/spreadsheets/d/e/2PACX-1vTRyzukpconv_IZ6zUNC_bVM7AV-t-IdKpAEQMsYMmU_IYKf-xLp2lEc8bFNGhmE4cXR8UyoyT8A8Sx/pub?output=csv",
            dataType: "text",
            success: function (data) {
                dataToJson(data);
            },
            error: function () {
                dataToJson({});
            }
        });

        function dataToJson(data) {
            csvObjects = $.csv.toObjects(data)
            console.log(csvObjects)
        }


    </script>
    <script type="text/javascript" src="cordova.js"></script>
    <script type="text/javascript" src="scripts/platformOverrides.js"></script>
    <script type="text/javascript" src="scripts/index.js"></script>
    <script type="text/javascript" src="scripts/GoogleMap.js"></script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAB3lEBZaaMOi_NVCn4PhcB2KNC-owMxYY&libraries=places&callback=initLocationProcedure"
            async defer></script>
</body>
</html>
